(function(e){function t(t){for(var o,n,i=t[0],u=t[1],l=t[2],c=0,d=[];c<i.length;c++)n=i[c],Object.prototype.hasOwnProperty.call(a,n)&&a[n]&&d.push(a[n][0]),a[n]=0;for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(e[o]=u[o]);f&&f(t);while(d.length)d.shift()();return s.push.apply(s,l||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],o=!0,n=1;n<r.length;n++){var i=r[n];0!==a[i]&&(o=!1)}o&&(s.splice(t--,1),e=u(u.s=r[0]))}return e}var o={},n={1:0},a={1:0},s=[];function i(e){return u.p+"js/"+({}[e]||e)+"."+{2:"e1935b0a",3:"ecfa0c2a",4:"66c33193",5:"08539ec1"}[e]+".js"}function u(t){if(o[t])return o[t].exports;var r=o[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,u),r.l=!0,r.exports}u.e=function(e){var t=[],r={2:1,3:1};n[e]?t.push(n[e]):0!==n[e]&&r[e]&&t.push(n[e]=new Promise((function(t,r){for(var o="css/"+({}[e]||e)+"."+{2:"684acf10",3:"b9037407",4:"31d6cfe0",5:"31d6cfe0"}[e]+".css",a=u.p+o,s=document.getElementsByTagName("link"),i=0;i<s.length;i++){var l=s[i],c=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(c===o||c===a))return t()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){l=d[i],c=l.getAttribute("data-href");if(c===o||c===a)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var o=t&&t.target&&t.target.src||a,s=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=o,delete n[e],f.parentNode.removeChild(f),r(s)},f.href=a;var g=document.getElementsByTagName("head")[0];g.appendChild(f)})).then((function(){n[e]=0})));var o=a[e];if(0!==o)if(o)t.push(o[2]);else{var s=new Promise((function(t,r){o=a[e]=[t,r]}));t.push(o[2]=s);var l,c=document.createElement("script");c.charset="utf-8",c.timeout=120,u.nc&&c.setAttribute("nonce",u.nc),c.src=i(e);var d=new Error;l=function(t){c.onerror=c.onload=null,clearTimeout(f);var r=a[e];if(0!==r){if(r){var o=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+o+": "+n+")",d.name="ChunkLoadError",d.type=o,d.request=n,r[1](d)}a[e]=void 0}};var f=setTimeout((function(){l({type:"timeout",target:c})}),12e4);c.onerror=c.onload=l,document.head.appendChild(c)}return Promise.all(t)},u.m=e,u.c=o,u.d=function(e,t,r){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(u.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)u.d(r,o,function(t){return e[t]}.bind(null,o));return r},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="",u.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var f=c;s.push([0,0]),r()})({0:function(e,t,r){e.exports=r("2f39")},"272a":function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return a}));const o=e=>{console.info("Network Error Detected")};async function n(){}async function a({apolloProvider:e}){e.errorHandler=o}},"2f39":function(e,t,r){"use strict";r.r(t);var o={};r.r(o),r.d(o,"RESET_SETTINGS",(function(){return j})),r.d(o,"SET_SETTINGS",(function(){return R}));var n={};r.r(n),r.d(n,"saveSettings",(function(){return U})),r.d(n,"clearSettings",(function(){return I})),r.d(n,"resetSettings",(function(){return N})),r.d(n,"syncSettings",(function(){return $}));var a={};r.r(a),r.d(a,"UPDATE_NETSTATUS",(function(){return M})),r.d(a,"UPDATE_WGS",(function(){return B})),r.d(a,"UPDATE_CFG_SM",(function(){return F}));var s={};r.r(s),r.d(s,"updateConfigSM",(function(){return L})),r.d(s,"updateWGS",(function(){return q}));r("5319"),r("573e"),r("7d6e"),r("e54f"),r("4439"),r("4605"),r("f580"),r("5b2b"),r("8753"),r("2967"),r("7e67"),r("d770"),r("dd82"),r("922c"),r("d7fb"),r("a533"),r("c32e"),r("a151"),r("8bc7"),r("e80f"),r("5fec"),r("e42f"),r("57fc"),r("d67f"),r("880e"),r("1c10"),r("9482"),r("e797"),r("4848"),r("53d0"),r("63b1"),r("e9fd"),r("195c"),r("64e9"),r("33c5"),r("4f62"),r("0dbc"),r("7c38"),r("0756"),r("4953"),r("81db"),r("2e52"),r("22485"),r("7797"),r("12a1"),r("ce96"),r("70ca"),r("2318"),r("24bd"),r("8f27"),r("3064"),r("c9a2"),r("8767"),r("4a8e"),r("b828"),r("3c1c"),r("21cb"),r("c00e"),r("e4a8"),r("e4d3"),r("f4d9"),r("fffd"),r("f645"),r("639e"),r("34ee"),r("b794"),r("af24"),r("7c9c"),r("7bb2"),r("64f7"),r("c382"),r("053c"),r("c48f"),r("f5d1"),r("3cec"),r("c00ee"),r("d450"),r("ca07"),r("14e3"),r("9393"),r("9227"),r("1dba"),r("674a"),r("de26"),r("6721"),r("9cb5"),r("ed9b"),r("fc83"),r("98e5"),r("605a"),r("ba60"),r("df07"),r("7903"),r("e046"),r("58af"),r("7713"),r("0571"),r("3e27"),r("6837"),r("3fc9"),r("0693"),r("bf41"),r("985d"),r("31cd");var i=r("2b0e"),u=r("1f91"),l=r("42d2"),c=r("b05d"),d=r("b12a");i["a"].use(c["a"],{config:{},lang:u["a"],iconSet:l["a"],plugins:{AppFullscreen:d["a"]}});var f=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"q-app"}},[r("router-view")],1)},g=[],p={name:"App"},v=p,b=r("2877"),m=Object(b["a"])(v,f,g,!1,null,null,null),h=m.exports,S=r("ded3"),y=r.n(S),k=r("9224"),w=r("bc3a"),C=r.n(w),T=r("2f62"),E=r("0e44"),O=r("82c0"),_=function(){return{localSettings:{main:{}}}},P=r("640f");function j(e,{board:t,defaultSettings:r}){e.localSettings=y()(y()({},e.localSettings),{},{[t]:y()({},r)})}function R(e,{board:t,settings:r,defaultSettings:o}){var n=e.localSettings[t]||o;e.localSettings=y()(y()({},e.localSettings),{},{[t]:y()(y()({},n),r)})}var x=r("1c16");const A=Object(x["a"])(C.a.post,1e3,!0);async function U({commit:e,rootGetters:t,rootState:r},o){const n=t.boardRoute,a=t.defaultSettings,s=Object(O["b"])(r.cfg);e("SET_SETTINGS",{settings:o,board:n,defaultSettings:a}),await A(`${r.apiBaseUrl}/cfg/${s}/${n}`,t.displaySettings)}async function I({commit:e,rootGetters:t,rootState:r}){const o=t.boardRoute,n=Object(O["b"])(r.cfg);console.log("clearing saved settings...",n,o),sessionStorage.removeItem(n),localStorage.removeItem(n),await A(`${r.apiBaseUrl}/cfg/${n}/${o}`,{})}function N({commit:e,dispatch:t,getters:r,rootGetters:o}){const n=o.boardRoute,a=o.defaultSettings;e("RESET_SETTINGS",{board:n,defaultSettings:a}),t("saveSettings")}async function $({commit:e,rootState:t,rootGetters:r}){const o=r.boardRoute,n=r.defaultSettings,a=Object(O["b"])(t.cfg),s=await C.a.get(`${t.apiBaseUrl}/cfg/${a}/${o}`);s.data&&e("SET_SETTINGS",{settings:s.data,board:o,defaultSettings:n})}var D={namespaced:!0,state:_,getters:P,mutations:o,actions:n},G={boardRoute(e){var t,r,o,n,a,s;return null!==(t=e.cfg)&&void 0!==t&&t.groups[null===(r=e.route)||void 0===r||null===(o=r.params)||void 0===o?void 0:o.board]?null===(n=e.route)||void 0===n||null===(a=n.params)||void 0===a?void 0:a.board:Object.keys(null===(s=e.cfg)||void 0===s?void 0:s.groups)[0]},appTitle(e,t){var r,o,n;return(null===(r=t.displaySettings)||void 0===r?void 0:r.title)||(null===(o=t.boardConfig)||void 0===o?void 0:o.title)||(null===(n=e.cfg)||void 0===n?void 0:n.appTitle)||t.boardRoute.toUpperCase()},refreshDelay(e,t){var r,o,n,a,s,i,u,l,c={kpis:(null===(r=t.displaySettings)||void 0===r?void 0:r.kpiRefresh)||(null===(o=t.boardConfig)||void 0===o?void 0:o.kpiRefresh)||(null===(n=e.cfg)||void 0===n?void 0:n.maxTickBeforeRefresh)||10};null!==(a=t.displaySettings)&&void 0!==a&&a.userRefresh&&-1!==(null===(s=t.displaySettings)||void 0===s?void 0:s.userRefresh)&&Object.assign(c,{users:(null===(i=t.displaySettings)||void 0===i?void 0:i.userRefresh)||(null===(u=t.boardConfig)||void 0===u?void 0:u.userRefresh)||(null===(l=e.cfg)||void 0===l?void 0:l.maxTickBeforeRefresh)});return c},boardConfig(e,t){return e.cfg.groups[t.boardRoute]||[]},defaultSettings(e,t){return y()(y()({},e.cfg.displaySettings),t.boardConfig)},kpiGroups(e,t){return Object(O["c"])(t.boardConfig.workgroups||[],"group","name")},kpiActiveGroups(e,t){return Object(O["c"])(t.boardConfig.workgroups.filter((e=>!t.kpiExcludedWorkgroups.includes(e.name))),"group","name")},kpiExcludedWorkgroups(e,t){var r;return(null===(r=e.settings.localSettings[t.boardRoute])||void 0===r?void 0:r.kpis_workgroups)||[]},kpiWorkgroups(e,t){return t.boardConfig.workgroups.filter((e=>!t.kpiExcludedWorkgroups.includes(e.name))).map((e=>e.name))},usersExcludedWorkgroups(e,t){var r;return(null===(r=e.settings.localSettings[t.boardRoute])||void 0===r?void 0:r.users_workgroups)||[]},usersWorkgroups(e,t){return t.boardConfig.workgroups.filter((e=>!t.usersExcludedWorkgroups.includes(e.name))).map((e=>e.name))},allStatistics(e){return e.cfg.statistics||[]},allStatuses(e){return Object.keys(e.cfg.statusColorCodes)||[]},allStatusesIcons(e){return Object.keys(e.cfg.statusIcons)||[]},displaySettings(e,t){return y()(y()({},e.cfg.displaySettings),e.settings.localSettings[t.boardRoute])},fontSizes(e,t){const r=parseFloat(t.displaySettings.zoomLevel||0);var o={level:{ratio:14,lratio:44},badge:{ratio:28,lratio:28},small:{ratio:18,lratio:18},medium:{ratio:28,lratio:28},large:{ratio:32,lratio:28},header:{ratio:14,lratio:12}};return Object.keys(o).map((e=>{o[e]={fontSize:`${Math.round(o[e].ratio*(1.2+r/24),1)}px`,lineHeight:`${Math.round(o[e].lratio*(1.2+r/28),1)}px`}})),o},fontSizesAlt(e,t){var r;const o=parseFloat((null===(r=t.displaySettings)||void 0===r?void 0:r.zoomLevel2)||0);var n={header:{ratio:24,lratio:12},badge:{ratio:34,lratio:32},medium:{ratio:28,lratio:24}};return Object.keys(n).map((e=>{n[e]={fontSize:`${Math.round(n[e].ratio*(.6+o/30),1)}px`,lineHeight:`${Math.round(n[e].lratio*(.6+o/30),1)}px`}})),n},hideUsers(e){return e.hideUsers},verticalMode(e,t){var r,o;return"vertical"in(null===(r=e.route)||void 0===r?void 0:r.query)||(null===(o=t.displaySettings)||void 0===o?void 0:o.vertical)||!1},nomenuMode(e,t){var r,o;return(null===(r=t.displaySettings)||void 0===r?void 0:r.nomenu)||"nomenu"in(null===(o=e.route)||void 0===o?void 0:o.query)},activeStatistics(e,t){return t.allStatistics.filter((e=>{var r;return-1!==((null===(r=t.displaySettings)||void 0===r?void 0:r.stats)||t.allStatistics.map((e=>e.queryField))).indexOf(e.queryField)}))},activeStatuses(e,t){return t.allStatuses.filter((e=>{var r;return((null===(r=t.displaySettings)||void 0===r?void 0:r.statuses)||t.allStatuses).includes(e)})).map((t=>{var r;return{label:t,color:e.cfg.statusColorCodes[t],icon:null!==(r=e.cfg)&&void 0!==r&&r.statusIcons?e.cfg.statusIcons[t]:""}}))},isDirty(e){return-1===[7].indexOf(e.kpis_status)},isready(e){return 6===e.kpis_status||7===e.kpis_status},isConnected(e){return 8!==e.kpis_status},linkState(e,t){return t.isready?"positive":t.isConnected?"warning":"negative"}};function M(e,{key:t,status:r}){e[`${t}_status`]=r}function B(e,{board:t,workgroups:r}){t&&Array.isArray(r)&&(e.cfg.groups[t].workgroups=r)}function F(e,{value:t,label:r,color:o}){var n,a=(null===(n=e.cfg)||void 0===n?void 0:n.statusColorCodes)||{};r?a=y()(y()({},a),{},{[r]:o}):delete a[t],e.cfg.statusColorCodes=y()({},a)}r("ddb0");function L({commit:e,getters:t},{label:r,color:o}){e("UPDATE_CFG_SM",{board:t.boardRoute,label:r,color:o})}function q({state:e,commit:t,getters:r},{groupName:o,operation:n,workgroupName:a,shortCode:s,position:i,color:u}){var l,c;const d=r.boardRoute;var f=[...(null===(l=e.cfg)||void 0===l||null===(c=l.groups[d])||void 0===c?void 0:c.workgroups)||[]];switch(n){case"save":f=f.filter((e=>e.group!=o&&e.name!=a));case"add":f=[...f,s?{group:o,name:a,label:s,position:i,color:u}:{group:o,name:a}];break;case"remove":f=f.filter((e=>e.group!=o&&e.name!=a));break;default:break}t("UPDATE_WGS",{board:r.boardRoute,workgroups:f})}i["a"].use(T["a"]),i["a"].filter("hms",O["d"]);var W=async function(){console.info("DashApp v",k["a"],", loading config...");const e=await C()("config.json"),{appTitle:t,wallboardId:r,displaySettings:o,groups:n,statusColorCodes:i,statusIcons:u,statistics:l,apiBaseUrl:c,tlBaseUrl:d}=e.data,f=Object(O["b"])({wallboardId:r}),g=!("userRefresh"in o)||o.userRefresh<=0;console.info(r," config loaded, creating store...");const p=Object(E["a"])({key:f,storage:window.sessionStorage,paths:["settings"]}),v=new T["a"].Store({state:{v:k["a"],hideUsers:g,tlBaseUrl:d,apiBaseUrl:c,users_status:0,kpis_status:0,cfg:{appTitle:t,wallboardId:r,displaySettings:o,groups:n,statusColorCodes:i,statusIcons:u,statistics:l}},getters:y()({},G),actions:s,mutations:a,modules:{settings:D},plugins:[p],strict:!1});return v},z=r("8c4f");const H=[{path:"/:board?",component:()=>Promise.all([r.e(0),r.e(3)]).then(r.bind(null,"713b")),props:e=>{var t;return{board:(null===(t=e.params)||void 0===t?void 0:t.board)||"main"}},children:[{name:"index",path:"",component:()=>Promise.all([r.e(0),r.e(2)]).then(r.bind(null,"8b24"))},{name:"debug",path:"debug",component:()=>Promise.all([r.e(0),r.e(4)]).then(r.bind(null,"9bd8"))}]},{path:"*",component:()=>Promise.all([r.e(0),r.e(5)]).then(r.bind(null,"e51e"))}];var J=H;i["a"].use(z["a"]);var K=function(){const e=new z["a"]({scrollBehavior:()=>({x:0,y:0}),routes:J,mode:"hash",base:""});return e},V=async function(){const e="function"===typeof W?await W({Vue:i["a"]}):W,t="function"===typeof K?await K({Vue:i["a"],store:e}):K;e.$router=t;const r={router:t,store:e,render:e=>e(h),el:"#q-app"};return{app:r,store:e,router:t}},Q=r("a925"),X={about:"About...",configuration:"Settings",darkmode:" Switch Dark Mode on or off",themesettings:"Theme Settings",dashsettings:"Dashboard Settings",clock:"current time",pause:"Pause Updates",restart:"Restart Updates",restore:"Restore Toolbar"},Y={about:"A propos de",configuration:"Configuration",darkmode:"Mode Sombre ou Clair",themesettings:"Thème de couleur",dashsettings:"Réglages",clock:"heure actuelle",pause:"Pause",restart:"Redémarrage",restore:"Barre d´outils"},Z={"en-us":X,"en-gb":X,"fr-be":Y,"fr-fr":Y,fr:Y};i["a"].use(Q["a"]);const ee=c["a"].lang,te=new Q["a"]({locale:"en-us",fallbackLocale:"en-us",messages:Z});var re=({app:e})=>{const t=ee.getLocale();console.info("detected locale = ",t),te.locale!==t&&(console.info("switching languages",te.locale," ==> ",t),te.locale=t),e.i18n=te},oe=r("31bd"),ne=async({store:e,router:t})=>{Object(oe["sync"])(e,t)},ae=r("6441");const se="";async function ie(){const{app:e,store:t,router:r}=await V();let o=!1;const n=e=>{o=!0;const t=Object(e)===e?r.resolve(e).route.fullPath:e;window.location.href=t},a=window.location.href.replace(window.location.origin,""),s=[re,ne,ae["a"]];for(let l=0;!1===o&&l<s.length;l++)if("function"===typeof s[l])try{await s[l]({app:e,router:r,store:t,Vue:i["a"],ssrContext:null,redirect:n,urlPath:a,publicPath:se})}catch(u){return u&&u.url?void(window.location.href=u.url):void console.error("[Quasar] boot error:",u)}!0!==o&&new i["a"](e)}ie()},"31cd":function(e,t,r){},3863:function(e,t,r){"use strict";t["a"]=async function({store:e}){return{default:{httpLinkConfig:{uri:e.state.tlBaseUrl||"/gql",onError:e=>{console.log("linkerr:",e)}},cacheConfig:{},additionalConfig:{defaultOptions:{loadingKey:"loading",watchQuery:{fetchPolicy:"cache-and-network",errorPolicy:"all"},query:{fetchPolicy:"cache-and-network",errorPolicy:"all"}}}},ssrOnServer:{additionalConfig:{ssrMode:!0}},ssrOnClient:{additionalConfig:{ssrForceFetchDelay:100}}}}},"640f":function(e,t){},"82c0":function(e,t,r){"use strict";r.d(t,"c",(function(){return o})),r.d(t,"d",(function(){return n})),r.d(t,"b",(function(){return a})),r.d(t,"a",(function(){return s}));r("13d5"),r("5319");const o=(e,t,r)=>e.reduce(((e,o)=>((e[o[t]]=e[o[t]]||[]).push(r?o[r]:o),e)),{});function n(e){if(isNaN(e))return"--:--";const t=new Date(1e3*e).toISOString();return t.substr(e>=3600?11:14,e>=3600?8:5)}const a=e=>`KPI:${(null===e||void 0===e?void 0:e.wallboardId)||"DEFAULT"}`,s=e=>"grp_"+e.replace(/([^a-z0-9])/gim,"_")},9224:function(e){e.exports=JSON.parse('{"a":"3.9.4"}')},ee25:function(e,t,r){"use strict";async function o(){}async function n(){}r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return n}))}});